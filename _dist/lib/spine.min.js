/*! ****************************************************************************
 * Spine v2.0.0
 *
 * A tiny MVC framework inspired from Backbone.js.
 * (you can download it from npm or github repositories)
 * Copyright (c) 2024 Mobilabs <contact@mobilabs.fr> (https://www.mobilabs.fr).
 * Released under the MIT license. You may obtain a copy of the License
 * at: http://www.opensource.org/licenses/mit-license.php).
 * Built from ES6Kadoo v2.2.1.
 * ************************************************************************** */
/*! Generated by Kadoo v1.3.0 */
!function(t,e){"use strict";"function"==typeof define&&define.amd?define([""],e):"object"==typeof exports?module.exports=e(t):t.Spine=e(t)}(this,(t=>{"use strict";let e={src:{spine:{},config:{},components:{model:{main:{},private:{fetch:{},util:{}}},collection:{main:{},private:{util1:{},util2:{},util3:{}}},view:{main:{}},router:{main:{},util:{}},history:{main:{}},radio:{main:{}},generic:{main:{}}},sync:{main:{},fetch:{}},utils:{util1:{}},libs:{_:{}}},libin:{}};return e.extend=function(t,e){for(var i=Object.keys(e),n=0;n<i.length;n++)t[i[n]]=e[i[n]]},function(t,e){"function"==typeof define&&define.amd?define([""],e):"object"==typeof exports?(module.exports=e(t),t.KZlog=e(t)):t.KZlog=e(t)}(e.libin,(t=>{let e,i={};return function(){const n=t.KZlog;let s;e=function(t,e,i){const n=Object.create(s);return n._library={name:"KZlog",version:"1.0.4"},n.name=t||"unknown!",n.level=e||"trace",n.highlight=!1!==i,n},e.NAME="KZlog",e.VERSION="1.0.4",e._setTestMode=function(){return[]},e.noConflict=function(){return t.KZlog=n,this},s={whoami(){return this._library},help(){const t=["","Prints a log message formatted as: [year-month-day] [level] name message,","Methods:","  help(): print this message,","  version(): return the version number,","  setName(name): set the name","  setLevel(level): set the level","  setHighlight()highlight: set the highlight mode","  trace(msg): print the trace message,","  debug(msg): print the debug message,","  info(msg): print the info message,","  warn(msg): print the warn message,","  error(msg): print the error message,","  fatal(msg): print the fatal message,",""].join("\n");console.log(t)},setName(t){return this.name=t||"unknown!",this},setLevel(t){return this.level=t||"trace",this},setHighlight(t){return this.highlight=!1!==t,this},trace(t){return i.print(this,t,"trace"),this},debug(t){return i.print(this,t,"debug"),this},info(t){return i.print(this,t,"info"),this},warn(t){return i.print(this,t,"warn"),this},error(t){return i.print(this,t,"error"),this},fatal(t){return i.print(this,t,"fatal"),this}}}(),function(){const t=["trace","debug","info","warn","error","fatal","off"];i={print(e,i,n){const s=t,r=[32,36,34,33,35,31,0],l=new Date;let o,c=`[${l.getFullYear()}-${l.getMonth()+1}-${l.getDate()}  `;c+=`${l.getHours()}:${l.getMinutes()}:${l.getSeconds()}:${l.getMilliseconds()}`,c+="]",e.level||(e.level="trace"),void 0===e.highlight&&(e.highlight=!0),s.indexOf(n)>=s.indexOf(e.level)&&(!0===e.highlight?(o=`${c} [[1;${r[s.indexOf(n)]}m${n}[0m] `,o+=`${e.name}: ${i}`):o=`${c} [${n}] ${e.name}: ${i}`,console.log(o),"object"==typeof i&&console.log(i))}}}(),e})),function(t,e){"function"==typeof define&&define.amd?define([""],e):"object"==typeof exports?(module.exports=e(t),t.Messenger=e(t)):t.Messenger=e(t)}(e.libin,(t=>{let e,i;return function(){const n=t.Messenger;let s;e=function(){const t=Object.create(s);return t._library={name:"Messenger",version:"1.0.4"},t._db={},t},e.NAME="Messenger",e.VERSION="1.0.4",e._setTestMode=function(){return[]},e.noConflict=function(){return t.Messenger=n,this},s={whoami(){return this._library},subscribe(t,e){return i.subscribe(this._db,t,e),this},subscribeOnce(t,e){return i.subscribeOnce(this._db,t,e),this},unsubscribe(t,e){return i.unsubscribe(this._db,t,e),this},publish(t,e){return i.publish(this._db,t,e),this}}}(),function(){function t(t,e){"string"==typeof e&&function(t,e){Object.prototype.hasOwnProperty.call(t,e)||(t[e]={listeners:[],listenersOnce:[]})}(t,e)}i={subscribe(e,i,n){!function(e,i,n){t(e,i),"string"==typeof i&&"function"==typeof n&&Object.prototype.hasOwnProperty.call(e,i)&&e[i].listeners.push(n)}(e,i,n)},subscribeOnce(e,i,n){!function(e,i,n){t(e,i),"string"==typeof i&&"function"==typeof n&&Object.prototype.hasOwnProperty.call(e,i)&&e[i].listenersOnce.push(n)}(e,i,n)},unsubscribe(t,e,i){!function(t,e,i){let n;"string"==typeof e&&"function"==typeof i&&Object.prototype.hasOwnProperty.call(t,e)&&(n=t[e].listeners.indexOf(i),n>=0&&t[e].listeners.splice(n,1),n=t[e].listenersOnce.indexOf(i),n>=0&&t[e].listenersOnce.splice(n,1))}(t,e,i)},publish(t,e,i){!function(t,e,i){if("string"==typeof e&&Object.prototype.hasOwnProperty.call(t,e)){for(let n=0;n<t[e].listeners.length;n++)t[e].listeners[n](i);for(let n=0;n<t[e].listenersOnce.length;n++)t[e].listenersOnce[n](i);t[e].listenersOnce.splice(0,t[e].listenersOnce.length)}}(t,e,i)}}}(),e})),function(t,e){"function"==typeof define&&define.amd?define([""],e):"object"==typeof exports?(module.exports=e(t),t.Overslash=e(t)):t.Overslash=e(t)}(e.libin,(t=>{let e,i;return i=function(t,e){const i=Object.keys(e);for(let n=0;n<i.length;n++)t[i[n]]=e[i[n]]},function(){const i=t.Overslash;e={_library:{name:"Overslash",version:"1.0.9"},_setTestMode:()=>[],noConflict(){return t.Overslash=i,this},whoami(){return this._library}},e.NAME="Overslash",e.VERSION="1.0.9"}(),i(e,{isUndefined:t=>void 0===t,isNull:t=>null===t,isBoolean:t=>!0===t||!1===t||"[object Boolean]"===Object.prototype.toString.call(t),isString:t=>"[object String]"===Object.prototype.toString.call(t),isNumber:t=>"[object Number]"===Object.prototype.toString.call(t),isNaN(t){return this.isNumber(t)&&t!==+t},isOdd(t){const e=t%2;return t===parseFloat(t)?!!e:void 0}}),i(e,{isObject(t){const e=typeof t;return("function"===e||"object"===e)&&!!t},isLiteralObject:t=>"[object Object]"===Object.prototype.toString.call(t),isFunction:t=>"[object Function]"===Object.prototype.toString.call(t),isArray:t=>"[object Array]"===Object.prototype.toString.call(t),isMath:t=>"[object Math]"===Object.prototype.toString.call(t),isDate:t=>"[object Date]"===Object.prototype.toString.call(t),isEmpty(t){let e;if(null===t)return!0;if(this.isArray(t)||this.isString(t))return 0===t.length;for(e in t)if(t.hasOwnProperty(e))return!1;return!0}}),i(e,{clone(t){const e=this.isArray(t)?[]:{};let i;if(this.isObject(t)){for(i in t)this.isArray(t[i])?e[i]=this.clone(t[i]):this.isObject(t[i])?e[i]=this.extend(t[i]):e[i]=t[i];return e}},extend(t){let e,i;if(!this.isObject(t))return t;for(let n=1;n<arguments.length;n++)for(i in e=arguments[n],e)this.isLiteralObject(arguments[n][i])?(t[i]=void 0!==t[i]?t[i]:{},this.extend(t[i],arguments[n][i])):hasOwnProperty.call(e,i)&&(t[i]=this.isArray(e[i])?this.clone(e[i]):e[i]);return t},keys:t=>Object.keys(t),forPropIn(t,e){this.keys(t).forEach((i=>{({}).hasOwnProperty.call(t,i)&&e(i)}))},assign(){const t=arguments[0];let e,i,n;for(n=1;n<arguments.length;n++)e=arguments[n],i=Object.keys(e).reduce(((t,i)=>(t[i]=Object.getOwnPropertyDescriptor(e,i),t)),{});return Object.defineProperties(t,i),t}}),i(e,{contains:(t,e)=>-1!==t.indexOf(e),flatten(t,e){let i,n=[],s=0;if(this.isArray(t)){if(e)return[].concat.apply([],t);for(i=0;i<t.length;i++)this.isArray(t[i])?(n=n.concat(this.flatten(t[i])),s=n.length):n[s++]=t[i];return n}},max(t){let e,i=null;if(!this.isArray(t))return;const n=this.flatten(t);for(e=0;e<n.length;e++)(null===i||i<n[e])&&(i="number"==typeof n[e]?n[e]:i);return null!==i?i:void 0},min(t){let e,i=null;if(!this.isArray(t))return;const n=this.flatten(t);for(e=0;e<n.length;e++)(null===i||i>n[e])&&(i="number"==typeof n[e]?n[e]:i);return null!==i?i:void 0},share(t){const e=[];let i,n,s;for(n=0;n<t.length;n++)if(i=t[n],!this.contains(e,i)){for(s=1;s<arguments.length&&this.contains(arguments[s],i);s++);s===arguments.length&&e.push(i)}return e},pull(t,...e){const i=Array.isArray(e[0])?e[0]:e,n=[];let s;return i.forEach((e=>{s=t.indexOf(e),s>-1&&n.push(t.splice(s,1)[0])})),n},include:(t,...e)=>(Array.isArray(e[0])?e[0]:e).filter((e=>t.indexOf(e)>-1)),partition:(t,e)=>[t.filter((t=>e(t))),t.filter((t=>!e(t)))]}),i(e,{}),e})),function(){const{config:i}=e.src,n=e.src.components.model.main,s=e.src.components.collection.main,r=e.src.components.view.main,l=e.src.components.router.main,o=e.src.components.history.main,c=e.src.components.radio.main,u=e.src.sync.main,a=e.src.utils.util1,h=t.Spine,d={_library:{name:"Spine",version:"2.0.0"},_setTestMode:()=>[],noConflict(){return t.Spine=h,this},whoami(){return this._library},Model:t=>n.Model(t),Collection:t=>s.Collection(t),View:t=>r.View(t),Router:t=>l.Router(t),fetch(...t){return u.fetch(...t),this},urify:(...t)=>a.urify(...t),History:o,Radio:c,NAME:"Spine",VERSION:"2.0.0"};e.src.spine=d}(),e.extend(e.src.config,{logger:{level:"warn"}}),function(){const{KZlog:t}=e.libin,{config:i}=e.src,{_:n}=e.src.libs,s=e.src.components.generic.main,r=e.src.utils.util1,l=e.src.components.model.private.fetch,o=e.src.components.model.private.util,{level:c}=i.logger,u=t("Spine",c,!1);let a;a={_intInitialize(...t){if(!/^initialize\((.*)\)[^{]+\{\s*\}/m.test(this.initialize.toString()))return u.warn("initialize method is deprecated, use $initialize instead!"),void this.initialize(...t);this.$initialize(...t)},_intListen(){if(!/^listen\((.*)\)[^{]+\{\s*\}/m.test(this.listen.toString()))return u.warn("listen method is deprecated, use $listen instead!"),void this.listen();this.$listen()},_intParse(...t){return/^parse\((.*)\)[^{]+\{\s*\}/m.test(this.parse.toString())?this.$parse(...t):(u.warn("parse method is deprecated, use $parse instead!"),this.parse(...t))},_init(...t){this.url=this.url||null,this.defaults=this.defaults||{};const[e,i]=t;return this._attributes=this._parse(e,i),this},_parse(t,e){let i=t||{};i=e&&e.parse?this._intParse(i):i;for(const t in this.defaults)i[t]||(i[t]=this.defaults[t]);return i},initialize(){},$initialize(){return this},listen(){},$listen(){return this},parse(){},$parse:t=>t,$get(t){return"string"==typeof t?this._attributes[t]:null},get(t){return u.warn("get method is deprecated, use $get instead!"),this.$get(t)},$getAll(){return{...this._attributes}},getAll(){return u.warn("getAll method is deprecated, use $getAll instead!"),this.$getAll()},$set(...t){return o.set(this,...t)},set(...t){return u.warn("set method is deprecated, use $set instead!"),this.$set(...t)},$remove(...t){return o.remove(this,...t)},remove(...t){return u.warn("remove method is deprecated, use $remove instead!"),this.$remove(...t)},$has(t){return"string"==typeof t&&t in this._attributes},has(t){return u.warn("has method is deprecated, use $has instead!"),this.$has(t)},$fetch(...t){return l.fetch(this,this.url,...t),this},fetch(...t){return u.warn("fetch method is deprecated, use $fetch instead!"),this.$fetch(...t)},$save(...t){return l.save(this,this.url,...t),this},save(...t){return u.warn("save method is deprecated, use $save instead!"),this.$save(...t)},$delete(...t){return l.delete(this,this.url,...t),this},delete(...t){return u.warn("delete method is deprecated, use $delete instead!"),this.$delete(...t)},$urify:(...t)=>r.urify(...t),urify(...t){return u.warn("urify method is deprecated, use $urify instead!"),this.$urify(...t)}},e.extend(e.src.components.model.main,{Model:function(t){let e;const i=function(){return this instanceof i?(s.Construct.apply(this,e),this._intInitialize.apply(this,e),this._intListen.apply(this),this):(e=arguments,new i)},r=n.assign({},s.methods),l=n.assign(r,a);return i.prototype=n.assign(l,t||{}),i.prototype.constructor=i,i}})}(),function(){const{KZlog:t}=e.libin,{config:i}=e.src,{_:n}=e.src.libs,s=e.src.components.generic.main,r=e.src.components.model.main,l=e.src.utils.util1,o=e.src.components.collection.private.util1,c=e.src.components.collection.private.util2,u=e.src.components.collection.private.util3,{level:a}=i.logger,h=t("Spine",a,!1);let d;d={_intInitialize(...t){if(!/^initialize\((.*)\)[^{]+\{\s*\}/m.test(this.initialize.toString()))return h.warn("initialize method is deprecated, use $initialize instead!"),void this.initialize(...t);this.$initialize(...t)},_intListen(){if(!/^listen\((.*)\)[^{]+\{\s*\}/m.test(this.listen.toString()))return h.warn("listen method is deprecated, use $listen instead!"),void this.listen();this.$listen()},_init(...t){return this._ids=[],this._cids=[],this._models=[],this.url=this.url||null,this.model=this.model||r.Model(),this.$add(t[0]),this},initialize(){},$initialize(){return this},listen(){},$listen(){return this},$get(t){return c.get(this,t)},get(t){return h.warn("get method is deprecated, use $get instead!"),this.$get(t)},$each(t){for(let e=0;e<this._models.length;e++)t(this._models[e],e);return this},each(t){return h.warn("each method is deprecated, use $each instead!"),this.$each(t)},$next(t){return c.next(this,t)},next(t){return h.warn("next method is deprecated, use $next instead!"),this.$next(t)},$previous(t){return c.previous(this,t)},previous(t){return h.warn("previous method is deprecated, use $previous instead!"),this.$previous(t)},$length(){return this._models.length},length(){return h.warn("length method is deprecated, use $length instead!"),this.$length()},$empty(){return this._ids=[],this._cids=[],this._models=[],this},empty(){return h.warn("empty method is deprecated, use $empty instead!"),this.$empty()},$add(t,e){return o.add(this,t,e)},add(t,e){return h.warn("add method is deprecated, use $add instead!"),this.$add(t,e)},$remove(t,e){return o.remove(this,t,e)},remove(t,e){return h.warn("remove method is deprecated, use $remove instead!"),this.$remove(t,e)},$fetch(...t){return o.fetch(this,...t),this},fetch(...t){return h.warn("fetch method is deprecated, use $fetch instead!"),this.$fetch(...t)},$save(...t){return u.save(this,this.url,...t),this},save(...t){return h.warn("save method is deprecated, use $save instead!"),this.$save(...t)},$delete(...t){return c.delete(this,...t),this},delete(...t){return h.warn("delete method is deprecated, use $delete instead!"),this.$delete(...t)},$urify:(...t)=>l.urify(...t),urify(...t){return h.warn("urify method is deprecated, use $urify instead!"),this.$urify(...t)}},e.extend(e.src.components.collection.main,{Collection:function(t){let e;const i=function(){return this instanceof i?(s.Construct.apply(this,e),this._intInitialize.apply(this,e),this._intListen.apply(this),this):(e=arguments,new i)},r=n.assign({},s.methods),l=n.assign(r,d);return i.prototype=n.assign(l,t||{}),i.prototype.constructor=i,i}})}(),function(){const{KZlog:t}=e.libin,{config:i}=e.src,{_:n}=e.src.libs,s=e.src.components.generic.main,{level:r}=i.logger,l=t("Spine",r,!1);let o;o={_intInitialize(...t){if(!/^initialize\((.*)\)[^{]+\{\s*\}/m.test(this.initialize.toString()))return l.warn("initialize method is deprecated, use $initialize instead!"),void this.initialize(...t);this.$initialize(...t)},_intListen(){if(!/^listen\((.*)\)[^{]+\{\s*\}/m.test(this.listen.toString()))return l.warn("listen method is deprecated, use $listen instead!"),void this.listen();this.$listen()},_init(){return this},initialize(){},$initialize(){return this},listen(){},$listen(){return this},render(){},$render(){return this}},e.extend(e.src.components.view.main,{View:function(t){let e;const i=function(){return this instanceof i?(s.Construct.apply(this,e),this._intInitialize.apply(this,e),this._intListen.apply(this),this):(e=arguments,new i)},r=n.assign({},s.methods),l=n.assign(r,o);return i.prototype=n.assign(l,t||{}),i.prototype.constructor=i,i}})}(),function(){const{KZlog:t}=e.libin,{config:i}=e.src,{_:n}=e.src.libs,s=e.src.components.generic.main,r=e.src.components.history.main,l=e.src.components.router.util,{level:o}=i.logger,c=t("Spine",o,!1);let u;u={_intInitialize(...t){if(!/^initialize\((.*)\)[^{]+\{\s*\}/m.test(this.initialize.toString()))return c.warn("initialize method is deprecated, use $initialize instead!"),void this.initialize(...t);this.$initialize(...t)},_intListen(){if(!/^listen\((.*)\)[^{]+\{\s*\}/m.test(this.listen.toString()))return c.warn("listen method is deprecated, use $listen instead!"),void this.listen();this.$listen()},_init(){return this._trigger=!0,this._replace=!1,this.routes=this.routes||{},l.startListeningHashChange(this),this},initialize(){},$initialize(){return this},listen(){},$listen(){return this},$execute(t,...e){return t&&t.apply(this,e),this},execute(t,...e){return c.warn("execute method is deprecated, use $execute instead!"),this.$execute(t,...e)},$navigate(t,e){return this._trigger=e&&e.trigger,this._replace=e&&e.replace,location.hash=`#${t}`,this},navigate(t,e){return c.warn("navigate method is deprecated, use $navigate instead!"),this.$navigate(t,e)},$getLastRoute:()=>r.get(),getLastRoute(){return c.warn("getLastRoute method is deprecated, use $getLastRoute instead!"),this.$getLastRoute()},$stop(){return l.stopListeningHashChange(),this},stop(){return c.warn("stop method is deprecated, use $stop instead!"),this.$stop()}},e.extend(e.src.components.router.main,{Router:function(t){let e;const i=function(){return this instanceof i?(s.Construct.apply(this,e),this._intInitialize.apply(this,e),this._intListen.apply(this),this):(e=arguments,new i)},r=n.assign({},s.methods),l=n.assign(r,u);return i.prototype=n.assign(l,t||{}),i.prototype.constructor=i,i}})}(),function(){const t={_history:null,start(){if(!this._history)return this._history=[],this;throw new Error("Spine.history is already running!")},stop(){return this._history=null,this},isHistoryRunning(){return!!this._history},get(t){if(this._history){let e=-1;return t&&"number"==typeof t&&t<0&&(e=this._history.length+t>=0?t:-this._history.length),this._history[this._history.length+e]}throw new Error("Spine.history is NOT running!")},push(t){if(this._history)return t&&"string"==typeof t&&(this._history.push(t),this._history.length>25&&this._history.shift()),this;throw new Error("Spine.history is NOT running!")},pop(){if(this._history)return this._history.pop();throw new Error("Spine.history is NOT running!")}};e.extend(e.src.components.history.main,t)}(),function(){const{Messenger:t}=e.libin,i={_mess:t(),on(t,e){return this._mess.subscribe(t,e),this},one(t,e){return this._mess.subscribeOnce(t,e),this},off(t,e){return this._mess.unsubscribe(t,e),this},fire(t,e){return this._mess.publish(t,e),this},trigger(t,e){return this.fire(t,e),this}};e.extend(e.src.components.radio.main,i)}(),function(){const t=e.src.sync.fetch,i={fetch(...e){return t.fetch(...e),this}};e.extend(e.src.sync.main,i)}(),function(){const{_:t}=e.src.libs;function i(e,i){return i&&(i.params||i.query)?i.params?`${e}${function(e){if(!t.isLiteralObject(e))return"";let i=e._params;for(const t in e)"_params"!==t&&(i=i.replace(`:${t}`,e[t]));return encodeURI(i)}(i.params)}`:`${e}${function(e){if(!t.isLiteralObject(e))return"";let i="?";for(const t in e)({}).hasOwnProperty.call(e,t)&&e[t]&&(i+=`${t}=${e[t]}&`);return i=encodeURI(i.slice(0,-1)),i}(i.query)}`:e}function n(...e){const[n,s]=function(...e){const[i,n]=e;switch(e.length){case 0:return[null,{}];case 1:return t.isString(i)?[i,{}]:[null,{}];default:return t.isString(i)&&t.isLiteralObject(n)?[i,n]:t.isString(i)?[i,{}]:[null,{}]}}(...e);return n?i(n,{query:s}):null}const s={getUrl:(t,e)=>i(t,e),urify:(...t)=>n(...t)};e.extend(e.src.utils.util1,s)}(),function(){const t=e.libin.Overslash;e.extend(e.src.libs._,t)}(),function(){const{Messenger:t}=e.libin,{KZlog:i}=e.libin,{config:n}=e.src,{level:s}=n.logger,r=i("Spine",s,!1);const l={_ginit(){return this._mess=t(),this},_init(){return this},$on(t,e){return this._mess.subscribe(t,e),this},on(t,e){return r.warn("on method is deprecated, use $on instead!"),this.$on(t,e)},$one(t,e){return this._mess.subscribeOnce(t,e),this},one(t,e){return r.warn("one method is deprecated, use $one instead!"),this.$one(t,e)},$off(t,e){return this._mess.unsubscribe(t,e),this},off(t,e){return r.warn("off method is deprecated, use $off instead!"),this.$off(t,e)},$fire(t,e){return this._mess.publish(t,e),this},fire(t,e){return r.warn("fire method is deprecated, use $fire instead!"),this.$fire(t,e)},$trigger(t,e){return this.$fire(t,e),this},trigger(t,e){return r.warn("trigger method is deprecated, use $trigger instead!"),this.$trigger(t,e)}};e.extend(e.src.components.generic.main,{Construct:function(...t){this._ginit(...t),this._init(...t)},methods:l})}(),function(){const{_:t}=e.src.libs,i=e.src.sync.main,n=e.src.utils.util1;function s(...e){const[i,n]=e;switch(e.length){case 0:return[{},null];case 1:return t.isLiteralObject(i)?[i,null]:t.isFunction(i)?[{},i]:[{},null];default:return t.isLiteralObject(i)&&t.isFunction(n)?[i,n]:t.isLiteralObject(i)?[i,null]:t.isFunction(i)?[{},i]:[{},null]}}function r(e,n,...s){const[r,l,o]=function(...e){const[i,n,s]=e;switch(e.length){case 0:return[null,null,null];case 1:return t.isLiteralObject(i)?[i,{},null]:[null,null,null];case 2:return t.isLiteralObject(i)&&t.isLiteralObject(n)?[i,n,null]:t.isLiteralObject(i)&&t.isFunction(n)?[i,{},n]:t.isLiteralObject(i)?[i,{},null]:[null,null,null];default:return t.isLiteralObject(i)&&t.isLiteralObject(n)&&t.isFunction(s)?[i,n,s]:t.isLiteralObject(i)&&t.isLiteralObject(n)?[i,n,null]:t.isLiteralObject(i)&&t.isFunction(n)?[i,{},n]:t.isLiteralObject(i)?[i,{},null]:[null,null,null]}}(...s);if(!r)return;const c={method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(r)},u="text"===l.type?"text":"json";i.fetch(n,c,u,((t,i)=>{t?o&&o(t):(l.silent||e.$fire("save",i),o&&o(t,i))}))}const l={fetch(t,e,...r){return function(t,e,...r){const[l,o]=s(...r);let c;c=l.params||l.query?n.getUrl(e,l):t._attributes.id?`${e}/${t._attributes.id}`:`${e}/1`;const u="text"===l.type?"text":"json";i.fetch(c,{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json"}},u,((e,i)=>{e?o&&o(e):(t._attributes=t._parse(i,l),l.silent||t.$fire("load",t._attributes),o&&o(null,t._attributes))}))}(t,e,...r),this},save(t,e,...i){return r(t,e,...i),this},delete(t,e,...n){return function(t,e,...n){const[r,l]=s(...n),o=t.$get("id");if(!o)return void(l&&l(null,"This model has no id. Thus, it does not exist on the server!"));if(!e)return void(l&&l(null,"This model has no url!"));const c="text"===r.type?"text":"json";i.fetch(`${e}/${o}`,{method:"DELETE",headers:{Accept:"application/json","Content-Type":"application/json"}},c,((e,i)=>{e?l&&l(e):(r.silent||t.$fire("delete",i),l&&l(e,i))}))}(t,e,...n),this}};e.extend(e.src.components.model.private.fetch,l)}(),function(){const{_:t}=e.src.libs;function i(e,...i){const[n,s]=function(...e){const[i,n]=e;switch(e.length){case 0:return[[],{}];case 1:return t.isString(i)?[[i],{}]:t.isArray(i)?[i,{}]:t.isLiteralObject(i)?[[],i]:[[],{}];default:return t.isString(i)&&t.isLiteralObject(n)?[[i],n]:t.isArray(i)&&t.isLiteralObject(n)?[i,n]:t.isString(i)?[[i],{}]:t.isArray(i)?[i,{}]:t.isLiteralObject(i)?[[],i]:t.isLiteralObject(n)?[[],n]:[[],{}]}}(...i),r=Object.keys(e._attributes),l={};let o;return n.forEach((t=>{r.indexOf(t)>-1&&(o={},o[t]=e._attributes[t],l[t]=o[t],delete e._attributes[t],s.silent||e.$fire("remove:prop",o))})),s.silent||e.$fire("remove",l),l}function n(e,...i){const[n,s]=function(...e){const[i,n,s]=e,r={};switch(e.length){case 0:return[{},{}];case 1:return t.isLiteralObject(i)?[i,{}]:[{},{}];case 2:return t.isLiteralObject(i)&&t.isLiteralObject(n)?[i,n]:t.isString(i)?(r[i]=n,[r,{}]):[{},{}];default:return t.isString(i)&&t.isLiteralObject(s)?(r[i]=n,[r,s]):t.isString(i)?(r[i]=n,[r,{}]):[{},{}]}}(...i),r={};let l;for(const t in n)({}).hasOwnProperty.call(n,t)&&e._attributes[t]!==n[t]&&(e._attributes[t]=n[t],r[t]=n[t],s.silent||e.$fire(`change:${t}`,n[t]),l=!0);return e._attributes.id&&(r.id=e._attributes.id),!s.silent&&l&&e.$fire("change",r),e._attributes}const s={set:(t,...e)=>n(t,...e),remove:(t,...e)=>i(t,...e)};e.extend(e.src.components.model.private.util,s)}(),function(){const{_:t}=e.src.libs,i=e.src.sync.main,n=e.src.utils.util1;function s(t,e,i,n){if(-1===i.indexOf(e)&&-1===n.indexOf(e))return null;for(let s=0;s<t.length;s++)if(t[s].cid===e||t[s].$get("id")===e){let r=i.indexOf(t[s].cid);return r>-1&&i.splice(r,1),r=n.indexOf(e),r>-1&&n.splice(r,1),t.splice(s,1)[0]}return null}function r(e,...s){const[r,l]=function(...e){const[i,n]=e;switch(e.length){case 0:return[{},null];case 1:return t.isLiteralObject(i)?[i,null]:t.isFunction(i)?[{},i]:[{},null];default:return t.isLiteralObject(i)&&t.isFunction(n)?[i,n]:t.isLiteralObject(i)?[i,null]:t.isFunction(i)?[{},i]:[{},null]}}(...s),o=n.getUrl(e.url,r),c="text"===r.type?"text":"json";i.fetch(o,{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json"}},c,((t,i)=>{if(t)return void(l&&l(t));const n=e.$add(i,{silent:!0,parse:r.parse});r.silent||e.$fire("load",n),l&&l(null,n)}))}const l={add:(e,i,n)=>function(e,i,n){const s=e._ids,r=e._cids,l=e.model,o=[];let c,u,a,h,d,p,f;c=t.isLiteralObject(i)?[i]:t.isArray(i)?i:[];for(let i=0;i<c.length;i++)if(t.isLiteralObject(c[i]))if(u=l(c[i],{parse:n&&n.parse}),h=u.$get("id"),s.includes(h)){f=Object.keys(u.$getAll()),d=e.$get(u.$get("id"));for(let t=0;t<f.length;t++)d._attributes[f[t]]=u._attributes[f[t]];p=t.clone(d),o.push(p),n&&n.silent||e.$fire("add",p)}else h&&s.push(h),u.cid=`c${r.length+1}`,r.push(u.cid),e._models.push(u),a=t.clone(u),o.push(a),n&&n.silent||e.$fire("add",a);return n&&n.silent||e.$fire("addcomplete",o),o}(e,i,n),remove:(e,i,n)=>function(e,i,n){let r;r=t.isLiteralObject(i)||t.isString(i)||t.isNumber(i)?[i]:t.isArray(i)?i:[];const l=[];for(let i=0;i<r.length;i++){let o;t.isLiteralObject(r[i])?o=s(e._models,r[i].cid,e._cids,e._ids):(t.isString(r[i])||t.isNumber(r[i]))&&(o=s(e._models,r[i],e._cids,e._ids)),o&&(l.push(o),n&&n.silent||e.$fire("remove",o))}return n&&n.silent||e.$fire("removecomplete",l),l}(e,i,n),fetch(t,...e){return r(t,...e),this}};e.extend(e.src.components.collection.private.util1,l)}(),function(){const{_:t}=e.src.libs,i=e.src.sync.main;function n(t,e,i){for(let n=0;n<t._models.length;n++)if(t._models[n].cid===e||t._models[n]._attributes.id===e)return i?n+1>=t._models.length?t._models[0]:t._models[n+1]:n-1<0?t._models[t._models.length-1]:t._models[n-1];return null}function s(e,...n){const[s,r,l]=function(...e){const[i,n,s]=e;switch(e.length){case 0:return[[],{},null];case 1:return t.isArray(i)?[i,{},null]:t.isFunction(i)?[[],{},i]:[[],{},null];case 2:return t.isArray(i)&&t.isLiteralObject(n)?[i,n,null]:t.isArray(i)&&t.isFunction(n)?[i,{},n]:t.isArray(i)?[i,{},null]:[[],{},null];default:return t.isArray(i)&&t.isLiteralObject(n)&&t.isFunction(s)?[i,n,s]:t.isArray(i)&&t.isLiteralObject(n)?[i,n,null]:t.isArray(i)&&t.isFunction(n)?[i,{},n]:t.isArray(i)&&t.isFunction(s)?[i,{},s]:[[],{},null]}}(...n),{url:o}=e;if(0===s.length)return r.silent||e.$fire("delete",[]),void(l&&l(null,[]));let c="?ids=";for(let t=0;t<s.length;t++)c+=t<s.length-1?`${s[t]},`:`${s[t]}`;const u="text"===r.type?"text":"json";i.fetch(`${o}${c}`,{method:"DELETE",headers:{Accept:"application/json","Content-Type":"application/json"}},u,((i,n)=>{if(i)return void(l&&l(i));const s=[];t.isLiteralObject(n)&&t.isArray(n.deleted)&&n.deleted.forEach((t=>{s.push(t.id)}));const o=e.$remove(s,{silent:!0});r.silent||e.$fire("delete",o),l&&l(null,o)}))}const r={get:(t,e,i)=>function(t,e){if(!e)return null;for(let i=0;i<t._models.length;i++)if(t._models[i].cid===e||t._models[i]._attributes.id===e)return t._models[i];return null}(t,e),delete(t,...e){return s(t,...e),this},next:(t,e)=>n(t,e,!0),previous:(t,e)=>n(t,e)};e.extend(e.src.components.collection.private.util2,r)}(),function(){const{_:t}=e.src.libs,i=e.src.sync.main;function n(e,n,...s){const[r,l,o,c]=function(...e){const[i,n,s,r]=e;switch(e.length){case 0:case 1:return[null,null,{},null];case 2:return t.isString(i)&&t.isLiteralObject(n)?[i,n,{},null]:[null,null,{},null];case 3:return t.isString(i)&&t.isLiteralObject(n)&&t.isLiteralObject(s)?[i,n,s,null]:t.isString(i)&&t.isLiteralObject(n)&&t.isFunction(s)?[i,n,{},s]:[i,n,{},null];default:return t.isString(i)&&t.isLiteralObject(n)&&t.isLiteralObject(s)&&t.isFunction(r)?[i,n,s,r]:t.isString(i)&&t.isLiteralObject(n)?[i,n,{},null]:[null,null,{},null]}}(...s),u={method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({where:r,params:l})},a="text"===o.type?"text":"json";i.fetch(n,u,a,((i,n)=>{if(i)c&&c(i);else{if(t.isArray(n)){let t,i;for(let s=0;s<n.length;s++)if(n[s].id&&(t=e.$get(n[s].id),t)){i=Object.keys(n[s]);for(let e=0;e<i.length;e++)"id"!==i[e]&&t.$set(i[e],n[s][i[e]])}return o.silent||e.$fire("save",n),void(c&&c(null,n))}o.silent||e.$fire("save",[]),c&&c(null,[])}}))}const s={save(t,e,...i){return n(t,e,...i),this}};e.extend(e.src.components.collection.private.util3,s)}(),function(){const t=e.src.components.history.main;function i(){const e=location.hash.slice(1);let i,n;this.routes[e]?i=e:[i,n]=e.includes("?")?function(t,e){let i=e.slice(0,e.indexOf("?"));if(i="/"===i.slice(-1)?i.slice(0,-1):i,t[i]){const t={};return e.slice(e.indexOf("?")+1).split("&").forEach((e=>{const i=e.split("=");if(2===i.length&&i[0].length>0){let e=i[1];/^\d+$/.test(e)&&(e=parseInt(e,10)),t[i[0]]=e}})),[i,t]}return[null,null]}(this.routes,e):function(t,e){let i,n,s=!1;const r=Object.keys(t);for(let t=0;t<r.length;t++)if(r[t].includes("/:")&&(n=r[t].split("/:"),e.startsWith(`${n[0]}/`))){i=r[t],s=!0;break}if(s){const[t]=n,s={},r=e.slice(t.length+1).split("/");for(let t=1;t<n.length;t++){let e=r[t-1];/^\d+$/.test(e)&&(e=parseInt(e,10)),s[n[t]]=e}return[i,s]}return[null,null]}(this.routes,e),i="string"==typeof i?i:"";const s=this[this.routes[i]];if("function"!=typeof s)throw new Error(`Spine.Router: this direction "${s}" does not match a function!`);t.isHistoryRunning()&&!this._replace&&t.push(e),this._replace=!1,this._trigger?this.$execute(s,n,i,e):this._trigger=!0}const n={startListeningHashChange(t){return this._route=i.bind(t),window.addEventListener("hashchange",this._route),window.addEventListener("load",this._route),this},stopListeningHashChange(){return window.removeEventListener("hashchange",this._route),window.removeEventListener("load",this._route),this}};e.extend(e.src.components.router.util,n)}(),function(){function t(t,e,i,n){!function(t,e,i){let n;fetch(t,e).then((t=>t.ok?t.text():(n=t.status,Promise.reject(t)))).then((t=>{i(null,t)})).catch((t=>{t&&t.cause&&"ERR_INVALID_URL"===t.cause.code&&"/api/v1/users/me"===t.cause.input?console.log(`Testing....., code: "${t.cause.code}", input: "${t.cause.input}".`):t&&t.text?t.text().then((t=>{i(t||{status:n,message:"none!",statusText:"none!"})})):console.log(t)}))}(t,e,((t,e)=>{if(t&&"json"===i){let e;try{e=JSON.parse(t),e.statusText=e.message}catch(i){e={status:"40x",message:t,statusText:t}}n(e)}else if(t)n(t);else if("json"!==i)n(null,e);else{let t;try{t=JSON.parse(e)}catch(i){t=e}n(null,t)}}))}const i={fetch(...e){const[i,n,s,r]=function(...t){const[e,i,n,s]=t;switch(t.length){case 0:return[null,null,null,null];case 1:return"string"==typeof e?[e,{},null,null]:[null,null,null,null];case 2:return"string"==typeof e?"object"==typeof i&&i.method?[e,i,null,null]:"string"==typeof i?[e,{},i,null]:"function"==typeof i?[e,{},null,i]:[e,{},null,null]:[null,null,null,null];case 3:return"string"==typeof e?"object"==typeof i&&i.method?"string"==typeof n?[e,i,n,null]:"function"==typeof n?[e,i,null,n]:[e,i,null,null]:"string"==typeof i?"function"==typeof n?[e,{},i,n]:[e,{},i,null]:"function"==typeof n?[e,{},null,n]:[e,{},null,null]:[null,null,null,null];case 4:return"string"==typeof e&&"object"==typeof i&&i.method&&"string"==typeof n&&"function"==typeof s?[e,i,n,s]:"string"==typeof e&&"object"==typeof i&&i.method&&"string"==typeof n?[e,i,n,null]:[null,null,null,null];default:return"string"==typeof e&&"object"==typeof i&&i.method&&"string"==typeof n&&"function"==typeof s?[e,i,n,s]:[null,null,null,null]}}(...e);return t(i,n,s||"json",((t,e)=>{r&&r(t,e)})),this}};e.extend(e.src.sync.fetch,i)}(),e.src.spine}));